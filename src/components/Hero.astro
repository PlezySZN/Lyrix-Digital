---
/**
 * ═══════════════════════════════════════════════════════════
 * HERO.ASTRO — LYRIX OS DESKTOP
 *
 * LCP-Optimized Hero Section.
 * - SSR-rendered <h1> for crawlers + screen readers
 * - Oswald font preloaded to eliminate FOIT (Flash of Invisible Text)
 * - CSS containment on the hero to isolate layout/paint
 * - Optional background image slot via <OptimizedImage priority>
 * - React island hydrates interactivity after first paint
 * ═══════════════════════════════════════════════════════════
 */

import type { Lang } from '../i18n/ui';
import { t } from '../i18n/utils';
import HeroContent from './HeroContent';
import StatusBar from './StatusBar';
import ContactModal from './ContactModal';
import ProjectModal from './ProjectModal';

interface Props { lang?: Lang; }
const { lang = 'en' } = Astro.props;
---

{/*
  ═══ LCP FONT PRELOAD ═══
  Oswald 700 (hero headline) is the LCP text element.
  Preloading the exact weight eliminates FOIT and shaves
  ~200-400ms off LCP on cold loads.
*/}
<link
  rel="preload"
  href="https://fonts.gstatic.com/s/oswald/v53/TK3_WkUHHAIjg75cFRf3bXL8LICs1_FvsUZiYA.woff2"
  as="font"
  type="font/woff2"
  crossOrigin="anonymous"
/>

<header
  className="relative"
  aria-label={lang === 'es' ? 'Sección principal' : 'Hero section'}
  style={{ contain: 'layout style paint' } as any}
>
  <!--
    SSR-rendered h1 — crawlable by all bots (Googlebot, Bingbot, social scrapers).
    The React island renders a visual duplicate with scramble animation,
    marked aria-hidden to avoid double-announcement.
  -->

  <!--
    ═══ OPTIONAL: HERO BACKGROUND IMAGE ═══
    When you have a hero background, uncomment and import:

    import OptimizedImage from './OptimizedImage.astro';
    import heroBg from '../assets/hero-bg.jpg';

    <div class="absolute inset-0 -z-10 overflow-hidden">
      <OptimizedImage
        src={heroBg}
        alt=""
        priority
        class="w-full h-full object-cover"
        sizes="100vw"
      />
      <div class="absolute inset-0 bg-[#050505]/80" />
    </div>

    For art-directed crops (mobile vs desktop):
    import Picture from './Picture.astro';
    import heroMobile from '../assets/hero-mobile.jpg';
    import heroDesktop from '../assets/hero-desktop.jpg';

    <Picture
      mobile={{ src: heroMobile, width: 640, height: 960 }}
      desktop={{ src: heroDesktop, width: 1920, height: 1080 }}
      alt=""
      priority
      class="w-full h-full object-cover"
    />
  -->

  <!-- SSR <h1> — visible to crawlers & screen readers, visually hidden for sighted users
       (the React island renders an animated visual duplicate marked aria-hidden) -->
  <h1
    class="sr-only"
    set:html={t(lang, 'hero.headline')}
  />
  <p class="sr-only">{t(lang, 'hero.subtitle')}</p>

  <!-- React Island: Spotlight Hero with Finder Navigation -->
  <HeroContent {lang} client:load />
</header>

<!--
  StatusBar + Modals — MUST live outside any `contain:` context.
  `contain: layout|paint` creates a new containing block that traps
  `position: fixed` descendants. These need viewport-level positioning.
-->
<StatusBar {lang} client:load />
<ContactModal {lang} client:load />
<ProjectModal {lang} client:load />
