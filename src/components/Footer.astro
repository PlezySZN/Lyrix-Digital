---
/**
 * ═══════════════════════════════════════════════════════════
 * FOOTER — LYRIX DIGITAL
 *
 * Authority footer with:
 * - Business identity (name, location, contact)
 * - Navigation links (quick access to main sections)
 * - Legal & compliance links (Privacy, Terms)
 * - Social proof (Instagram)
 * - Schema-reinforcing address (matches LocalBusiness in SEO.astro)
 *
 * Design: Dark Industrial Luxury — matches the site aesthetic.
 * pb-16 accounts for the fixed StatusBar dock at viewport bottom.
 * ═══════════════════════════════════════════════════════════
 */

import type { Lang } from '../i18n/ui';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;

const isEs = lang === 'es';

/* ─── Bilingual footer copy ─── */
const copy = {
  tagline: isEs
    ? 'Infraestructura digital que posiciona tu negocio.'
    : 'Digital infrastructure that ranks your business.',
  nav: isEs ? 'Navegación' : 'Navigation',
  legal: isEs ? 'Legal' : 'Legal',
  connect: isEs ? 'Conectar' : 'Connect',
  home: isEs ? 'Inicio' : 'Home',
  services: isEs ? 'Servicios' : 'Services',
  portfolio: isEs ? 'Portafolio' : 'Portfolio',
  blog: 'Blog',
  contact: isEs ? 'Contacto' : 'Contact',
  privacy: isEs ? 'Política de Privacidad' : 'Privacy Policy',
  terms: isEs ? 'Términos de Servicio' : 'Terms of Service',
  rights: isEs
    ? 'Todos los derechos reservados.'
    : 'All rights reserved.',
  builtWith: isEs
    ? 'Construido con Astro · Desplegado en Cloudflare Edge'
    : 'Built with Astro · Deployed on Cloudflare Edge',
};

/* ─── Link helpers ─── */
const prefix = lang === 'en' ? '' : `/${lang}`;
const homeHref = lang === 'en' ? '/' : `/${lang}/`;

const navLinks = [
  { label: copy.home, href: homeHref },
  { label: copy.services, href: `${homeHref}#services` },
  { label: copy.portfolio, href: `${homeHref}#portfolio` },
  { label: copy.blog, href: `${prefix}/blog/` },
  { label: copy.contact, href: `${homeHref}#contact` },
];

const legalLinks = [
  { label: copy.privacy, href: `${prefix}/privacy/` },
  { label: copy.terms, href: `${prefix}/terms/` },
];
---

<footer
  class="relative bg-[#0a0a0a] border-t border-white/5 pb-20 pt-12 px-4 md:px-8"
  role="contentinfo"
  aria-label={isEs ? 'Pie de página del sitio' : 'Site footer'}
>
  <div class="max-w-6xl mx-auto">
    {/* ─── Top Grid: Brand + Nav + Legal + Connect ─── */}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 mb-12">

      {/* ── Column 1: Brand Identity ── */}
      <div class="sm:col-span-2 lg:col-span-1">
        <a href={homeHref} class="inline-block mb-3">
          <span class="font-['Oswald'] text-2xl font-bold uppercase tracking-wider text-[#EDEDED]">
            LYRIX<span class="text-[#CCFF00]">.</span>
          </span>
        </a>
        <p class="text-sm text-[#A1A1AA] leading-relaxed max-w-xs">
          {copy.tagline}
        </p>
        <address class="not-italic mt-4 text-xs text-[#A1A1AA] leading-relaxed">
          Vega Alta, PR 00692<br />
          <a href="tel:+17876644109" data-track="contact_call" data-source="footer" class="hover:text-[#CCFF00] transition-colors">(787) 664-4109</a><br />
          <a href="mailto:lyrixdigitals@gmail.com" data-track="contact_email" data-source="footer" class="hover:text-[#CCFF00] transition-colors">lyrixdigitals@gmail.com</a>
        </address>
      </div>

      {/* ── Column 2: Navigation ── */}
      <div>
        <h3 class="font-['Oswald'] text-xs font-bold uppercase tracking-widest text-white/60 mb-4">
          {copy.nav}
        </h3>
        <ul class="space-y-2.5" role="list">
          {navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class="text-sm text-[#A1A1AA] hover:text-[#CCFF00] transition-colors duration-200"
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      {/* ── Column 3: Legal ── */}
      <div>
        <h3 class="font-['Oswald'] text-xs font-bold uppercase tracking-widest text-white/60 mb-4">
          {copy.legal}
        </h3>
        <ul class="space-y-2.5" role="list">
          {legalLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class="text-sm text-[#A1A1AA] hover:text-[#CCFF00] transition-colors duration-200"
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      {/* ── Column 4: Connect ── */}
      <div>
        <h3 class="font-['Oswald'] text-xs font-bold uppercase tracking-widest text-white/60 mb-4">
          {copy.connect}
        </h3>
        <ul class="space-y-2.5" role="list">
          <li>
            <a
              href="https://instagram.com/lyrixdigital"
              target="_blank"
              rel="noopener noreferrer"
              data-track="social_click"
              data-source="footer"
              data-platform="instagram"
              class="inline-flex items-center gap-2 text-sm text-[#A1A1AA] hover:text-[#CCFF00] transition-colors duration-200"
            >
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                <path d="m16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
              </svg>
              @lyrixdigital
            </a>
          </li>
          <li>
            <a
              href="mailto:lyrixdigitals@gmail.com"
              data-track="contact_email"
              data-source="footer_connect"
              class="inline-flex items-center gap-2 text-sm text-[#A1A1AA] hover:text-[#CCFF00] transition-colors duration-200"
            >
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              </svg>
              lyrixdigitals@gmail.com
            </a>
          </li>
          <li>
            <a
              href="tel:+17876644109"
              data-track="contact_call"
              data-source="footer_connect"
              class="inline-flex items-center gap-2 text-sm text-[#A1A1AA] hover:text-[#CCFF00] transition-colors duration-200"
            >
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              (787) 664-4109
            </a>
          </li>
        </ul>
      </div>
    </div>

    {/* ─── Divider ─── */}
    <div class="border-t border-white/5 pt-6 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-xs text-[#A1A1AA] text-center sm:text-left">
        &copy; {new Date().getFullYear()} Lyrix Digital. {copy.rights}
      </p>
      <p class="text-xs text-[#A1A1AA] font-mono text-center sm:text-right">
        {copy.builtWith}
      </p>
    </div>
  </div>
</footer>

<!-- ═══ Footer GTM Event Tracking ═══ -->
<script>
  document.addEventListener('click', (e) => {
    const target = e.target instanceof Element ? e.target : null;
    const el = target ? target.closest('[data-track]') : null;
    if (!el) return;

    const event = el.getAttribute('data-track') || '';
    const source = el.getAttribute('data-source') || 'footer';
    const platform = el.getAttribute('data-platform');

    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push(Object.assign(
      { event, source },
      platform ? { platform } : null,
    ));
  });
</script>
